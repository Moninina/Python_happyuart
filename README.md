# 基于 PyQt5 的串口通信上位机应用

用于与硬件设备进行通信，支持预设命令与自定义命令发送、串口数据实时接收与显示。

---

## 核心模块

### 1. SerialPort 类

管理串口通信的基础类，负责底层串口操作：

- `__init__()`：初始化默认串口参数（波特率 115200、8 数据位、无校验、1 停止位）

- `open()`：打开指定的串口

- `close()`：关闭当前打开的串口

- `send()`：发送数据到串口

- `receive()`：接收串口所有可用数据

### 2. MainWindow 类

主窗口应用，集成 UI 界面与业务逻辑：

#### 命令库

- `self.commands`：白天模式预设命令，包含 13 种图像处理算法（如马赛克、白平衡、色彩转换等）

- `self.commandsfind`：扩展命令库，支持白天(D)和夜间(N)两种模式的命令变体

####  UI 界面 (`setup_ui()`)

- **队伍编号显示**：固定显示 `CICC88888888`

- **串口选择**：下拉菜单自动识别并选择可用串口

- **串口参数配置**：支持数据位、校验位、停止位的自定义设置

- **预设命令按钮**：3 列网格布局，每个按钮对应一条预设命令

- **自定义命令输入**：文本框输入自定义命令并发送

- **数据显示区**：

    - 发送数据显示（只读）

    - 接收数据显示（只读）

- **定时器**：每 100ms 自动读取一次串口数据

#### 菜单 (`setup_menu()`)

- **文件菜单**：提供打开/关闭串口的快捷操作

#### 关键方法

- `send_command()`：发送预设命令

- `send_custom_command()`：解析并发送自定义命令，支持参数替换

    - 自动白平衡：修改第 4、5 字节参数

    - 白平衡：修改第 7、8、9 字节参数

    - 自定义命令：修改第 2-9 字节参数

- `read_serial()`：定时读取串口数据并更新显示

---

##  应用启动

程序通过创建 `QApplication` 实例、显示主窗口并进入事件循环完成启动
